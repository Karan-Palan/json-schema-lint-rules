{
  "title": "Remove single-`$ref` `allOf` wrapper (draft-2019-09, 2020-12 only)",
  "description": "In draft-04/06/07 the `$ref` MUST remain inside the `allOf`; starting in 2019-09 a solitary `$ref` does not require the wrapper.",
  "examples": [
    {
      "after": {
        "$ref": "#/$defs/User"
      },
      "before": {
        "allOf": [
          {
            "$ref": "#/$defs/User"
          }
        ]
      },
      "doc": true
    }
  ],
  "autofixable": true,
  "categories": [ "readability", "style" ],
  "comprehensiveExamples": [
    {
      "title": "Wrong (2019-09+): Single-$ref allOf wrapper",
      "description": "In modern drafts, a solitary $ref can be inlined without allOf.",
      "after": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$ref": "#/$defs/User"
      },
      "before": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "allOf": [
          {
            "$ref": "#/$defs/User"
          }
        ]
      }
    },
    {
      "title": "Right: Inline $ref",
      "description": "Using $ref directly is clearer.",
      "after": {
        "$ref": "#/$defs/User"
      },
      "before": {
        "$ref": "#/$defs/User"
      }
    }
  ],
  "dialects": {
    "2019-09": [ "allOf", "$ref" ],
    "2020-12": [ "allOf", "$ref" ]
  },
  "message": "Inline the `$ref` and delete the redundant `allOf` wrapper.",
  "references": [
    "https://json-schema.org/draft/2020-12/json-schema-core.html#name-allof"
  ]
}
